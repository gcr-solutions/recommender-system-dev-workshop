<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.79.1"><meta name=description content><link rel="shortcut icon" href=https://gcr-solutions.github.io/recommender-system-dev-workshop/images/favicon.ico type=image/x-icon><title>Develop Online Of Recommender System :: Recommender System Solution</title><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/nucleus.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/fontawesome-all.min.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/hybrid.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/featherlight.min.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/perfect-scrollbar.min.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/auto-complete.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/atom-one-dark-reasonable.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/theme.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/tabs.css?1650786464 rel=stylesheet><link href=https://gcr-solutions.github.io/recommender-system-dev-workshop/css/hugo-theme.css?1650786464 rel=stylesheet><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/jquery-3.3.1.min.js?1650786464></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/4_develop_online/readme/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://gcr-solutions.github.io/recommender-system-dev-workshop/><img src=https://gcr-solutions.github.io/recommender-system-dev-workshop/images/logo.png alt="AWS Logo" width=44% height=44%></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/lunr.min.js?1650786464></script><script type=text/javascript src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/auto-complete.js?1650786464></script><script type=text/javascript>var baseurl="https:\/\/gcr-solutions.github.io\/recommender-system-dev-workshop\/";</script><script type=text/javascript src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/search.js?1650786464></script></div><div class=highlightable><ul class=topics><li data-nav-id=/prerequisite/ title=Prerequisite class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/prerequisite/>Prerequisite</a><ul><li data-nav-id=/prerequisite/environment/ title=Environment class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/prerequisite/environment/>Environment</a></li><li data-nav-id=/prerequisite/workspace/ title="Setup Workspace" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/prerequisite/workspace/>Setup Workspace</a></li></ul></li><li data-nav-id=/deploy/ title=Deployment class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/>Deployment</a><ul><li data-nav-id=/deploy/scenario-method/ title="Choose Scenario and Method" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/scenario-method/>Choose Scenario and Method</a></li><li data-nav-id=/deploy/offline/ title="Deploy Offline" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/offline/>Deploy Offline</a></li><li data-nav-id=/deploy/online/ title="Deploy Online" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/online/>Deploy Online</a><ul><li data-nav-id=/deploy/online/create-online-ci/ title="Create Online CodeBuild" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/online/create-online-ci/>Create Online CodeBuild</a></li><li data-nav-id=/deploy/online/create-infra/ title="Create Infrastructure" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/online/create-infra/>Create Infrastructure</a></li><li data-nav-id=/deploy/online/update-online-config/ title="Update Config" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/online/update-online-config/>Update Config</a></li><li data-nav-id=/deploy/online/argocd-server/ title="Setup Argo CD Server" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/online/argocd-server/>Setup Argo CD Server</a></li><li data-nav-id=/deploy/online/create-argocd-app/ title="Create Argo CD application" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/deploy/online/create-argocd-app/>Create Argo CD application</a></li></ul></li></ul></li><li data-nav-id=/develop-experience/ title="How Does It Work" class="dd-item
parent"><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/>How Does It Work</a><ul><li data-nav-id=/develop-experience/1_overview/ title="The Story Line Of Recommender System Workshop" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/1_overview/>The Story Line Of Recommender System Workshop</a></li><li data-nav-id=/develop-experience/2_user/ title="Browse The Recommender System" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/2_user/>Browse The Recommender System</a></li><li data-nav-id=/develop-experience/3_data/ title="Data Exploration" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/3_data/>Data Exploration</a></li><li data-nav-id=/develop-experience/4_develop_online/readme/ title="Develop Online Of Recommender System" class="dd-item active"><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/4_develop_online/readme/>Develop Online Of Recommender System</a></li><li data-nav-id=/develop-experience/5_develop_offline/readme/ title="Develop Offline Of Recommender System" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/5_develop_offline/readme/>Develop Offline Of Recommender System</a></li><li data-nav-id=/develop-experience/6_train/ title="Action Model Update" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/6_train/>Action Model Update</a></li><li data-nav-id=/develop-experience/7_new/ title="New Items Added And Batch Update" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/7_new/>New Items Added And Batch Update</a></li><li data-nav-id=/develop-experience/8_change_method/ title="Switch Recommendation Method" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/8_change_method/>Switch Recommendation Method</a></li></ul></li><li data-nav-id=/cleanup/ title=Cleanup class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/cleanup/>Cleanup</a></li><li data-nav-id=/debug-tips/ title=Tips class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/debug-tips/>Tips</a><ul><li data-nav-id=/debug-tips/issues/ title=Debug class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/debug-tips/issues/>Debug</a><ul><li data-nav-id=/debug-tips/issues/deploy-argocd-application-issues/ title="Create Argo CD Application" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/debug-tips/issues/deploy-argocd-application-issues/>Create Argo CD Application</a></li><li data-nav-id=/debug-tips/issues/demo-web-issues/ title="Browse The Recommender System" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/debug-tips/issues/demo-web-issues/>Browse The Recommender System</a></li><li data-nav-id=/debug-tips/issues/codebuild-issues/ title="Deploy CodeBuild" class=dd-item><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/debug-tips/issues/codebuild-issues/>Deploy CodeBuild</a></li></ul></li></ul></li></ul><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value;">
<option id=en value=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/4_develop_online/readme/ selected>English</option>
<option id=cn value=https://gcr-solutions.github.io/recommender-system-dev-workshop/cn/develop-experience/4_develop_online/readme/>Chinese</option></select><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li></ul></section><section id=footer><left><a class=github-button href=https://github.com/gcr-solutions/recommender-system-dev-workshop data-icon=octicon-cloud-download aria-label="Repo of gcr-solutions/recommender-system-dev-workshop on GitHub">Repo</a>
<a class=github-button href=https://github.com/gcr-solutions/recommender-system-dev-workshop data-icon=octicon-star data-show-count=false aria-label="Star gcr-solutions/recommender-system-dev-workshop on GitHub">Star</a>
<a class=github-button href=https://github.com/gcr-solutions/recommender-system-dev-workshop/fork data-icon=octicon-repo-forked data-show-count=false aria-label="Fork gcr-solutions/recommender-system-dev-workshop on GitHub">Fork</a><p><a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | © 2021, Amazon Web Services, Inc. or its affiliates. All rights reserved</p></left><script async defer src=https://buttons.github.io/buttons.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-YGV6QJDB2K"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-YGV6QJDB2K');</script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/>Recommender System Solution Workshop</a> > <a href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/>How Does It Work</a> > Develop Online Of Recommender System</span></div><div class=progress><div class=wrapper><nav id=TableOfContents></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Develop Online Of Recommender System</h1><p>In this part, you&rsquo;ll change some code to add two features in online part, and then deploy them to your Recommender System.</p><ol><li>Add hot topic</li></ol><ul><li><p>Open <code>recommender-system-dev-workshop-code/src/filter/plugins/news/service.py</code> file</p></li><li><p>Go to line 358 and uncomment below code.</p><pre><code># hot_topic_news_list = self.get_hot_topic_news_list(user_id, hot_topic_count, present_recommend_news_id_list, recommended_news_list)
</code></pre></li><li><p>Push your change to your CodeCommit repo</p><pre><code>cd /home/ec2-user/environment/recommender-system-dev-workshop-code/src/filter/plugins/news
git pull
git add service.py
git commit -m &quot;test for online development&quot;
git push
</code></pre></li><li><p>Go to <a href=https://console.aws.amazon.com/codesuite/codebuild/projects>codebuild project</a> , and search <code>gcr-rs-dev-workshop-filter-build</code>. Build the project again.</p><p><img src=https://gcr-solutions.github.io/recommender-system-dev-workshop/images/build-filter-codebuild.png alt=Build-Filter-Codebuild></p></li><li><p>After <strong>gcr-rs-dev-workshop-filter-build</strong> succeeded, ArgoCD will deploy filter services in 3 minutes, please go to ArgoCD to check it.</p></li><li><p>Verify it.
After clicking at three pieces of news, you will see the recommendation list in the first channel. The recommendation result consists of two parts. The first
part is top recommendation according to the most interested type in your portrait. In this example, it seems that <strong>gcr-rs-admin</strong> is very interested in
the entertainment, the first 2-3 lines of recommendation list are entertainment news:
<img src=https://gcr-solutions.github.io/recommender-system-dev-workshop/images/top-type-news.png alt=Top-Type-News></p></li></ul><ol start=2><li>Add portrait recall. The recommender system that you just deployed only has recall according to user recent clicked, and you&rsquo;ll follow below steps to add another recall according to user portrait.</li></ol><ul><li><p>Open <code>/recommender-system-dev-workshop-code/src/recall/plugins/news/service_impl.py</code> file</p></li><li><p>Go to line 142 and uncomment below code.</p><pre><code># self.recall_by_portrait(user_portrait, recall_wrap, recall_items, multiple_shot_record)
</code></pre></li><li><p>Push your change to your CodeCommit repo</p><pre><code>cd /home/ec2-user/environment/recommender-system-dev-workshop-code/src/recall/plugins/news
git pull
git add service_impl.py
git commit -m &quot;test for online portrait&quot;
git push
</code></pre></li><li><p>Go to <a href=https://console.aws.amazon.com/codesuite/codebuild/projects>codebuild project</a> and search <strong>gcr-rs-dev-workshop-recall-build</strong>. Build the project again.</p></li><li><p>After <strong>gcr-rs-dev-workshop-recall-build</strong> succeeded, ArgoCD will deploy filter services in 3 minutes, please go to ArgoCD to check it.</p></li><li><p>Verify it. After clicking at three pieces of news, recall process will be triggered, you can go to argo cd server to check recall service log, you should see **portrait_** text in **recall result**</p><p><img src=https://gcr-solutions.github.io/recommender-system-dev-workshop/images/check-recall-service.png alt=check-recall-service></p><p><img src=https://gcr-solutions.github.io/recommender-system-dev-workshop/images/recall-log.png alt=recall-log></p></li></ul><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/3_data/ title="Data Exploration"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=https://gcr-solutions.github.io/recommender-system-dev-workshop/develop-experience/5_develop_offline/readme/ title="Develop Offline Of Recommender System" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/clipboard.min.js?1650786464></script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/perfect-scrollbar.min.js?1650786464></script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/perfect-scrollbar.jquery.min.js?1650786464></script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/jquery.sticky.js?1650786464></script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/featherlight.min.js?1650786464></script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/highlight.pack.js?1650786464></script><script>hljs.initHighlightingOnLoad();</script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/modernizr.custom-3.6.0.js?1650786464></script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/learn.js?1650786464></script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/js/hugo-learn.js?1650786464></script><script src=https://gcr-solutions.github.io/recommender-system-dev-workshop/mermaid/mermaid.js?1650786464></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>